{"version":3,"file":"ultralytics.min.js","sources":["../src/client.ts"],"sourcesContent":[null],"names":["STORAGE_SESSION","STORAGE_USER","UltralyticsClient","constructor","this","_initialized","_endpoint","_sessionId","_userId","_sessionTimeout","_lastActivity","_boundHandlers","_autoTrack","_lastTrackedPath","_debug","_pendingEvents","_eventsSent","_errorCount","_storage","get","key","localStorage","getItem","set","value","setItem","remove","removeItem","_log","level","message","data","prefix","Date","toISOString","logFn","console","error","warn","log","undefined","_logDebug","_logInfo","_logWarn","_logError","getDebugInfo","initialized","endpoint","sessionId","userId","autoTrack","lastActivity","sessionAge","now","pendingEvents","getStats","sent","errors","pending","init","options","respectDoNotTrack","_isDoNotTrackEnabled","_removeEventListeners","replace","debug","sessionTimeout","_initSession","_restoreUserId","visibilityChange","document","visibilityState","_checkSession","beforeUnload","addEventListener","window","_setupAutoTracking","trackInitialPageView","nav","navigator","win","doNotTrack","msDoNotTrack","providedSessionId","_storeSession","stored","_getStoredSession","id","_generateId","oldSessionId","newSessionId","trackInitial","location","pathname","trackPageView","popState","_onHistoryChange","self","wrap","fn","args","apply","history","pushState","bind","replaceState","path","c","r","Math","random","toString","JSON","stringify","parse","track","name","properties","eventData","timestamp","_send","url","href","title","referrer","h","removeEventListener","destroy","trackEvent","eventName","eventType","reset","identify","traits","hasTraits","getUserId","clearUser","trackBatch","events","callback","err","Error","Array","isArray","length","prepared","map","e","eventCount","_sendBatch","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","count","responseText","success","response","send","exports","Ultralytics","default"],"mappings":"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"}